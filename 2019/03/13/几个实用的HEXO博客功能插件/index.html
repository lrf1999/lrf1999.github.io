<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>几个实用的HEXO博客功能插件 | codeLinR的博客</title><meta name="description" content="一、前言即使是作为一名前端完全新手，也不希望自己的博客页面功能过于简单，虽然花哨的功能不需要，但是一些最基本的大众化模块还是要有吧，我的 Hexo 博客使用的主题 Phantom （下文中提到的主题文件夹也就是这个文件名，但是我会写成 ${theme_dir} ）就是属于功能模块比较简单的那种主题，借助 Hexo 强大的功能扩展能力，自己动手整合了一些有用的插件到我的博客中，主要包括：非插件化的"><meta name="keywords" content="hexo,博客插件"><meta name="author" content="codeLinR"><meta name="copyright" content="codeLinR"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="几个实用的HEXO博客功能插件"><meta name="twitter:description" content="一、前言即使是作为一名前端完全新手，也不希望自己的博客页面功能过于简单，虽然花哨的功能不需要，但是一些最基本的大众化模块还是要有吧，我的 Hexo 博客使用的主题 Phantom （下文中提到的主题文件夹也就是这个文件名，但是我会写成 ${theme_dir} ）就是属于功能模块比较简单的那种主题，借助 Hexo 强大的功能扩展能力，自己动手整合了一些有用的插件到我的博客中，主要包括：非插件化的"><meta name="twitter:image" content="https://gitee.com/lin_risheng/assetOne/raw/master/images/hexo_logo.jpg"><meta property="og:type" content="article"><meta property="og:title" content="几个实用的HEXO博客功能插件"><meta property="og:url" content="http://linrisheng.cn/2019/03/13/%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84HEXO%E5%8D%9A%E5%AE%A2%E5%8A%9F%E8%83%BD%E6%8F%92%E4%BB%B6/"><meta property="og:site_name" content="codeLinR的博客"><meta property="og:description" content="一、前言即使是作为一名前端完全新手，也不希望自己的博客页面功能过于简单，虽然花哨的功能不需要，但是一些最基本的大众化模块还是要有吧，我的 Hexo 博客使用的主题 Phantom （下文中提到的主题文件夹也就是这个文件名，但是我会写成 ${theme_dir} ）就是属于功能模块比较简单的那种主题，借助 Hexo 强大的功能扩展能力，自己动手整合了一些有用的插件到我的博客中，主要包括：非插件化的"><meta property="og:image" content="https://gitee.com/lin_risheng/assetOne/raw/master/images/hexo_logo.jpg"><meta property="article:published_time" content="2019-03-13T11:12:13.000Z"><meta property="article:modified_time" content="2020-05-14T11:42:00.073Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://linrisheng.cn/2019/03/13/%E5%87%A0%E4%B8%AA%E5%AE%9E%E7%94%A8%E7%9A%84HEXO%E5%8D%9A%E5%AE%A2%E5%8A%9F%E8%83%BD%E6%8F%92%E4%BB%B6/"><link rel="prev" title="github搜索技巧汇总" href="http://linrisheng.cn/2019/05/12/github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/"><link rel="next" title="数据库优化-数据库结构优化" href="http://linrisheng.cn/2019/03/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">27</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、前言"><span class="toc-number">1.</span> <span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、功能模块"><span class="toc-number">2.</span> <span class="toc-text">二、功能模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Markdown-中自定义-CSS-样式"><span class="toc-number">2.1.</span> <span class="toc-text">1. Markdown 中自定义 CSS 样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-添加博客-RSS-订阅功能"><span class="toc-number">2.2.</span> <span class="toc-text">2. 添加博客 RSS 订阅功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-文章添加-emoji-表情符"><span class="toc-number">2.3.</span> <span class="toc-text">3. 文章添加 emoji 表情符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-文章里图片的懒加载功能"><span class="toc-number">2.4.</span> <span class="toc-text">4. 文章里图片的懒加载功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-强大的静态搜索功能插件"><span class="toc-number">2.5.</span> <span class="toc-text">5. 强大的静态搜索功能插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、总结"><span class="toc-number">3.</span> <span class="toc-text">三、总结</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://gitee.com/lin_risheng/assetOne/raw/master/images/hexo_logo.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">codeLinR的博客</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">几个实用的HEXO博客功能插件</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date" title="发表于 2019-03-13 19:12:13"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-03-13</time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/hexo/">hexo</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>即使是作为一名前端完全新手，也不希望自己的博客页面功能过于简单，虽然花哨的功能不需要，但是一些最基本的大众化模块还是要有吧，我的 Hexo 博客使用的主题 Phantom <em>（下文中提到的主题文件夹也就是这个文件名，但是我会写成 <code>${theme_dir}</code> ）</em>就是属于功能模块比较简单的那种主题，借助 Hexo 强大的功能扩展能力，自己动手整合了一些有用的插件到我的博客中，主要包括：非插件化的 CSS 样式控制、文章表情符 emoji 显示、博客 RSS 订阅功能、文章图片懒加载显示、静态搜索 search 功能等！</p>
<p>添加了这些功能后，感觉踏实多了，</p>
<p>可折腾我不少时间了，现在我把这些功能添加的过程大致的分享一下，作为自己的备忘，也希望帮助到其他有需求的前端小白们更好地使用 Hexo 博客构筑，如果是大神的话，你可以忽略了。</p>
<h2 id="二、功能模块"><a href="#二、功能模块" class="headerlink" title="二、功能模块"></a>二、功能模块</h2><p>我这里主要使用也是推荐应用的功能模块主要就以下几个：</p>
<ol>
<li>Markdown 中自定义 CSS 样式</li>
<li>添加博客 RSS 订阅功能</li>
<li>文章添加 emoji 表情符</li>
<li>文章里图片的懒加载功能</li>
<li>强大的静态搜索功能插件</li>
</ol>
<h3 id="1-Markdown-中自定义-CSS-样式"><a href="#1-Markdown-中自定义-CSS-样式" class="headerlink" title="1. Markdown 中自定义 CSS 样式"></a>1. Markdown 中自定义 CSS 样式</h3><p>有时候写文章需要一些特殊的字体或者颜色表现样式，这其实很简单，不需要任何插件，直接在 <code>md</code> 文章文件中使用 <code>HTML</code> 加 <code>CSS</code> 样式就可以了，就像这样：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p markdown&#x3D;&quot;1&quot; style&#x3D;&quot;</span><br><span class="line">    color: red; </span><br><span class="line">    font-weight: bold; &quot;</span><br><span class="line">&gt;PS: （2017-05-15更新）更新的内容如下......&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>

<p><strong>PS: （2017-05-15更新）更新的内容如下……</strong></p>
<p>另外 <a href="https://hexo.io/docs/tag-plugins.html" target="_blank" rel="noopener">Hexo 官方</a>说明的方式是添加 <code>` 和 `</code> 标签块，结果和上面不使用标签块是一样的：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&lt;p markdown&#x3D;&quot;1&quot; style&#x3D;&quot;</span><br><span class="line">    color: red; </span><br><span class="line">    font-weight: bold; &quot;</span><br><span class="line">&gt;PS: （2017-05-15更新）更新的内容如下......&lt;&#x2F;p&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>

<p>尽情的在 <code>style=&quot;&quot;</code> 中添加你想要的样式吧。</p>
<h3 id="2-添加博客-RSS-订阅功能"><a href="#2-添加博客-RSS-订阅功能" class="headerlink" title="2. 添加博客 RSS 订阅功能"></a>2. 添加博客 RSS 订阅功能</h3><p>虽然这个功能有点鸡肋，但是如果你是一位优秀的博主，日志文章被大量客户访问阅读，那么你必定需要 RSS 订阅模块，为那些有需求的客户提供日志订阅的功能。我的博客 RSS 订阅就是一个 XML 文件的链接，这个 <a href="http://liuqingwen.me/blog/atom.xml" target="_blank" rel="noopener">XML 文件</a>需要由插件自动生成，这个插件是： <code>hexo-generator-feed</code> ，在 GitHub 上有相关应用说明：<a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexojs/hexo-generator-feed</a> 。直接安装这个 Hexo 插件：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>

<p>安装好之后，每次 <code>hexo g</code> 命令或者启动服务都会自动生成 <code>atom.xml</code> 文件（你也可以设置成 <code>rss2.xml</code> 文件，具体设置参考官网吧），然后把 RSS 订阅的地址链接到这个文件即可！ So easy!</p>
<h3 id="3-文章添加-emoji-表情符"><a href="#3-文章添加-emoji-表情符" class="headerlink" title="3. 文章添加 emoji 表情符"></a>3. 文章添加 emoji 表情符</h3><p>表情符这么重要的写作功能怎么能不具备呢？习惯了在微信、 QQ 上聊天的表情符号，写作也必须来几桶表情符是吧？！</p>
<p>其实表情符都是一些小图片，如果直接在写文章的时候像插入图片一样插入表情符，那会比较痛苦，所以我们需要安装一个表情符简写渲染的插件： <code>hexo-filter-github-emojis</code> ：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-filter-github-emojis --save</span><br></pre></td></tr></table></figure>

<p>安装后在根目录下的配置文件 <code>_config.yml</code> 中进行具体配置，还可以添加自定义的表情符（我已经把网站上的部分表情符下载到本地改成自定义表情符了</p>
<p>）：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">githubEmojis:</span><br><span class="line">  enable: true</span><br><span class="line">  className: github-emoji</span><br><span class="line">  unicode: false</span><br><span class="line">  localEmojis:</span><br><span class="line">    your_emoji_1: </span><br><span class="line">      src: http:&#x2F;&#x2F;your&#x2F;emoji&#x2F;path&#x2F;img1.png</span><br><span class="line">    your_emoji_2: </span><br><span class="line">      src: http:&#x2F;&#x2F;your&#x2F;emoji&#x2F;path&#x2F;img2.png</span><br></pre></td></tr></table></figure>

<p>这样你在写文章的时候可以直接简单地用这种格式表达表情符： <code>:your_emoji_1:</code> <code>:your_emoji_2:</code> ，最后文章渲染显示就是类似这样的表情图片了：</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/9d6j0rwar4.png?imageView2/2/w/1620" alt=""></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/wtnh6w1fnu.png?imageView2/2/w/1620" alt=""></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/91norlw2pp.png?imageView2/2/w/1620" alt=""></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/bu9f6be24o.png?imageView2/2/w/1620" alt=""></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/b2yyu9x4wk.png?imageView2/2/w/1620" alt=""></p>
<p>具体说明可以到插件地址查看： <a href="https://github.com/crimx/hexo-filter-github-emojis" target="_blank" rel="noopener">hexo-filter-github-emojis</a> ，内有详细使用配置说明。</p>
<h3 id="4-文章里图片的懒加载功能"><a href="#4-文章里图片的懒加载功能" class="headerlink" title="4. 文章里图片的懒加载功能"></a>4. 文章里图片的懒加载功能</h3><p>这是我很喜欢的一个功能，也是折腾我最久的，毕竟新手加小白</p>
<p>。图片的懒加载在很多地方都能看到，比如微信订阅号的文章就是采用图片懒加载的方式显示，这是一个流量为王和手机阅读的时代，大量的图片容易造成不必要的流量耗费，不过懒加载并不是减少流量使用，而是当不需要显示的时候就不要耗费多余的流量了，增加用户体验吧。</p>
<p>实现这个功能对我来说有点繁琐，首先需要安装渲染插件： <code>hexo-renderer-marked-lazy</code> ，然后还需要一个 JS 库： <code>Echo.js</code> ，最后需要手动写一点点 JS 代码，一步一步的来：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-renderer-marked-lazy --save</span><br></pre></td></tr></table></figure>

<p>上面安装插件之后，在根目录配置的文件 <code>_config.yml</code> 中添加以下配置：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">marked:</span><br><span class="line">    lazyAttr: data-echo</span><br><span class="line">    blankSrc: http:&#x2F;&#x2F;your&#x2F;loading&#x2F;path&#x2F;blankSrc.gif</span><br></pre></td></tr></table></figure>

<p>配置原理我等下说，接着需要在生成文章的页面添加相关 JS 脚本，我直接下载了 <code>echo.js</code> 这个脚本（连接：<a href="https://github.com/toddmotto/echo/blob/master/src/echo.js" target="_blank" rel="noopener">echo.js</a> ），保存在博客主题下的文件夹中：<code>${theme_dir}/source/scripts/echo.js</code> ，接下来在主题文件夹下的模板文件 <code>${theme_dir}/source/after-footer.ejs</code> 中添加应用 JS 代码，这样生成的每篇文章都会包含这个 JS 脚本：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- js(&#39;scripts&#x2F;echo.js&#39;) %&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  echo.init(&#123;</span><br><span class="line">    offset: 100,</span><br><span class="line">    throttle: 250,</span><br><span class="line">    unload: false,</span><br><span class="line">    callback: function (element, op) &#123;</span><br><span class="line">      console.log(element, &#39;has been&#39;, op + &#39;ed&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  &#x2F;&#x2F; echo.render(); is also available for non-scroll callbacks</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>学过前端的朋友应该一眼就能看清楚这是怎么实现的，他的基本原理就是利用 <code>hexo-renderer-marked-lazy</code> 插件把 <code>md</code> 文章中的图片标记： <code>![real image](http://url/to/real/img.jpg)</code> 渲染成带有 <code>data-echo</code> 标签的 HTML ： <code>&lt;img src=&quot;blankSrc.gif&quot; data-echo=&quot;http://url/to/real/img.jpg&quot; alt=&quot;some desc&quot;&gt;</code> ，这样显示的不是真实的图片，而是你在配置文件中配置的 <code>blankSrc</code> 所指向的临时图片，最后由 <code>echo.js</code> 脚本替换临时图片 <code>src</code> 为 <code>data-echo</code> 表示的真实链接并加载真实的图片。</p>
<p>怎么样？也比较简单吧，确实折腾了我很久，需要的就 Add 上吧！</p>
<h3 id="5-强大的静态搜索功能插件"><a href="#5-强大的静态搜索功能插件" class="headerlink" title="5. 强大的静态搜索功能插件"></a>5. 强大的静态搜索功能插件</h3><p>现在哪个页面没有搜索功能？内容为王的前提下，搜索功能显得尤为重要！此乃必不可少的功能，大牛、 dalao 有的组件，我们小菜也要有！</p>
<p>关于 Hexo 博客搜索功能，我参考了不少文章，但是要么比价复杂，要么需要技术支持，折腾了我一天！最后在这篇文章：<a href="http://www.netcan666.com/2015/11/20/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3Hexo%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%9C%E7%B4%A2%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener"><strong>完美解决Hexo静态博客搜索问题</strong></a>中找到了引荐的静态搜索开源项目： <a href="http://www.tipue.com/search/" target="_blank" rel="noopener">Tipue Search</a> ，但是这篇文章不适合我等新手，而这篇官方文章： <a href="https://www.npmjs.com/package/hexo-generator-tipue-search-json" target="_blank" rel="noopener">hexo-generator-tipue-search-json</a> 给了我足够的安装指导！</p>
<p>参考了 <code>hexo-generator-tipue-search-json</code> 这个插件的官方说明后，我也是按部就班地尝试，但是也有稍微不一样的地方，如果你需要这个功能，按照说明不能解决的话，那就按我的做吧，</p>
<p>先安装插件：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-generator-tipue-search-json --save</span><br></pre></td></tr></table></figure>

<p>这个插件主要用来生成搜索引擎需要的 JSON 数据，会保存在搜索引擎目录 <code>tipuesearch/tipuesearch_content.json</code> 文件中。安装好插件后，还要下载 Tipue 搜索插件的源码：Tipue Search <a href="http://www.tipue.com/search/tipuesearch.zip" target="_blank" rel="noopener">点击下载</a> ，下载完把压缩包里的 <code>tipuesearch</code> 文件夹复制到你的<strong>主题目录</strong>： <code>${theme_dir}/source</code> 下，然后修改<strong>主题文章模板</strong>文件 <code>article-full.ejs</code> 的内容（这些 <code>ejs</code> 文件一般都在 <code>${theme_dir}/layout/_partial</code> 下，自己找一下吧），添加如下搜索功能的代码，它的作用大概是相当于收录文章转化数据的意思吧：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;tipue_search_content&quot; style&#x3D;&quot;display: none&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下面的是之前有的，上面的代码是添加的 --&gt;</span><br><span class="line">&lt;!-- Content --&gt;</span><br><span class="line">&lt;%- item.content %&gt;</span><br></pre></td></tr></table></figure>

<p>接着需要在有搜索功能的页面加入 JS 和 CSS 引用，在<strong>主题根部模板</strong>文件 <code>after-footer.ejs</code> 中添加以下引用和脚本，使 JS 发挥搜索的作用：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href&#x3D;&quot;&lt;%- config.root %&gt;tipuesearch&#x2F;css&#x2F;tipuesearch.css&quot; rel&#x3D;&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;&lt;%- config.root %&gt;tipuesearch&#x2F;tipuesearch_set.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;&lt;%- config.root %&gt;tipuesearch&#x2F;tipuesearch.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;!-- 这里可能有一些其他原来文件里的代码，也可以没有 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $(document).ready(function () &#123;</span><br><span class="line">        var searchInput &#x3D; $(&#39;#tipue_search_input&#39;);</span><br><span class="line">        searchInput.tipuesearch(&#123;</span><br><span class="line">            &#39;mode&#39;: &#39;json&#39;,</span><br><span class="line">            &#39;minimumLength&#39;: 2,</span><br><span class="line">            &#39;contentLocation&#39;: &#39;&lt;%- config.root %&gt;tipuesearch&#x2F;tipuesearch_content.json&#39;,</span><br><span class="line">            highlightEveryTerm: true</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        $(&#39;#search-form&#39;).on(&#39;submit&#39;, function (e) &#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">            $(&#39;#tipue_search_content&#39;).show();</span><br><span class="line">            $(&#39;#content&#39;).hide();</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        searchInput.keyup(function () &#123;</span><br><span class="line">            var length &#x3D; $(this).val().length;</span><br><span class="line">            if (length &lt; 1) &#123;</span><br><span class="line">                $(&#39;#tipue_search_content&#39;).hide();</span><br><span class="line">                $(&#39;#content&#39;).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>最后，在<strong>主题页面模板</strong>文件 <code>article-page.ejs</code> 中添加搜索内容显示框（ <code>div</code> ）的 HTML 代码：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(item.addSearch) &#123; %&gt;</span><br><span class="line">    &lt;form id&#x3D;&quot;search-form&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;tipue_search_left&quot;&gt;&lt;img src&#x3D;&quot;&lt;%- config.root %&gt;tipuesearch&#x2F;search.png&quot; class&#x3D;&quot;tipue_search_icon&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;tipue_search_right&quot; style&#x3D;&quot;width:80%;&quot;&gt;&lt;input  type&#x3D;&quot;text&quot; name&#x3D;&quot;q&quot; id&#x3D;&quot;tipue_search_input&quot; autocomplete&#x3D;&quot;off&quot; required placeholder&#x3D;&quot;&lt;%&#x3D; __(&#39;search&#39;) %&gt;&quot; style&#x3D;&quot;width:80%;&quot; &#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;tipue_search_content&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下面的是之前有的，上面的代码是添加的 --&gt;</span><br><span class="line">&lt;!-- Content --&gt;</span><br><span class="line">&lt;%- item.content %&gt;</span><br></pre></td></tr></table></figure>

<p>这里有必要说明一下，我这里使用了 <code>&lt;% if(item.addSearch) { %&gt;</code> 这样的 <code>ejs</code> 语法块，其实很简单你也能看的懂，我是在 <code>md</code> 文章的开头 <code>Front-matter</code> 中添加了一个 <code>addSearch</code> 的变量，值为 <code>true</code> 表示生成的这个页面是带搜索功能的页面，值没有或者为 <code>false</code> 表示这个页面不会添加搜索引擎和显示搜索结果，关于 <code>Front-matter</code> 的解释就是每篇文章的开头 <code>---</code> 包含的代码部分，就像这样：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分享几个实用的HEXO博客功能插件</span><br><span class="line">subtitle: Share several extra useful functionality of Hexo blog via plugins or code</span><br><span class="line">date: 2017-05-16 13:39:19</span><br><span class="line">tags: [Hexo]</span><br><span class="line">cover_index: cover.png</span><br><span class="line">cover_detail:</span><br><span class="line">addSearch: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>完成了所有配置，这时候你只需要新建一个提供搜索的页面即可，就像你创建 <code>Tags</code> <code>About</code> <code>Category</code> 页面一样：</p>
<figure class="highlight plain"><figcaption><span>.token .language-javascript&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page search</span><br></pre></td></tr></table></figure>

<p>如果你和我的一样设置，记得在 <code>source/_post/search</code> 文件夹下的 <code>index.md</code> 中的 <code>Front-matter</code> 添加 <code>addSearch: true</code> 参数。好了，就这样OK了，希望你能理解吧。</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/3kq0ab0teu.png?imageView2/2/w/1620" alt=""></p>
<h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><p>越到后面确实有点小复杂，我也是折腾了不少时间啊，主要是对于前端我几乎完全门外汉，没办法，只能自己琢磨了。不求花哨，但求够用。</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/lenxzr227i.png?imageView2/2/w/1620" alt=""></p>
<p>最后，在这里还是需要提醒一下，如果博客配置文件 <code>_config.yml</code> 中指定博客地址有根目录的话，比如我的博客根目录是 <code>root: /blog/</code> ，那么有很多地方需要加上 <code>config.root</code> 才能正确显示相关的链接（也包括资源的引用，你可以看到我的代码中不少包含了 <code>config.root</code> ），我设置了根目录，所以直接使用 Tipue 搜索引擎的时候搜索出来的文章显示的链接少了 <code>/blog</code> ，那样都是错误的地址，这时候就要手动更改一下 <code>hexo-generator-tipue-search-json</code> 这个插件的源码使它在生成的 JSON 数据的链接里加入 <code>/blog</code> ，修改按以下步骤：</p>
<ol>
<li>找到博客根目录下 <code>node_modules/hexo-generator-tipue-search-json/index.js</code> 文件</li>
<li>打开并找到这行代码： <code>case &#39;url&#39;: return actualPost[item] = post[&#39;path&#39;];</code></li>
<li>修改代码添加上根目录： <code>case &#39;url&#39;: return actualPost[item] = hexo.config.root + post[&#39;path&#39;];</code></li>
</ol>
<p>好了，希望对你有帮助。</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-4358082/b2yyu9x4wk.png?imageView2/2/w/1620" alt=""></p>
<blockquote>
<p>参考资料： Hexo Tag Plugins: <a href="https://hexo.io/docs/tag-plugins.html" target="_blank" rel="noopener">https://hexo.io/docs/tag-plugins.html</a> Tipue Search: <a href="http://www.tipue.com/search/" target="_blank" rel="noopener">http://www.tipue.com/search/</a> Plugin: hexo-generator-tipue-search-json: <a href="https://www.npmjs.com/package/hexo-generator-tipue-search-json" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-generator-tipue-search-json</a> Plugin: hexo-filter-github-emojis: <a href="https://www.npmjs.com/package/hexo-filter-github-emojis" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-filter-github-emojis</a> Plugin: hexo-filter-github-emojis (Github): <a href="https://github.com/crimx/hexo-filter-github-emojis" target="_blank" rel="noopener">https://github.com/crimx/hexo-filter-github-emojis</a> Plugin: hexo-generator-feed: <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">https://github.com/hexojs/hexo-generator-feed</a> Plugin: hexo-renderer-marked-lazy: <a href="https://www.npmjs.com/package/hexo-renderer-marked-lazy" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-renderer-marked-lazy</a> Echo.js: <a href="https://github.com/toddmotto/echo/" target="_blank" rel="noopener">https://github.com/toddmotto/echo/</a></p>
</blockquote>
<p><a href="http://liuqingwen.me/blog/tags/Hexo/" target="_blank" rel="noopener">Hexo</a></p>
</div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/hexo/">hexo</a><a class="post-meta__tags" href="/tags/%E5%8D%9A%E5%AE%A2%E6%8F%92%E4%BB%B6/">博客插件</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/lin_risheng/assetOne/raw/master/images/nodejs_logo.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/05/12/github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB/"><img class="prev_cover" src="https://gitee.com/lin_risheng/assetOne/raw/master/images/githublogo1.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">github搜索技巧汇总</div></div></a></div><div class="next-post pull_right"><a href="/2019/03/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E4%BC%98%E5%8C%96/"><img class="next_cover" src="https://gitee.com/lin_risheng/assetOne/raw/master/images/mysqllogo1.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据库优化-数据库结构优化</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/05/15/Hexo使用SSH连接GitHub/" title="Hexo使用SSH连接GitHub"><img class="relatedPosts_cover" src="https://gitee.com/lin_risheng/assetOne/raw/master/images/hexo_logo.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-05-15</div><div class="relatedPosts_title">Hexo使用SSH连接GitHub</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC81MDA4NC8yNjU3NA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By codeLinR</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script></body></html>